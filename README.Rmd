[![Build Status](https://travis-ci.org/wahani/aoos.png?branch=master)](https://travis-ci.org/wahani/aoos)

# Another object orientation system in R
```{r, results='asis', echo=FALSE}
cat(gsub("\\n   ", "", packageDescription("aoos", fields = "Description")))
```

## Installation
To install from CRAN:
```{r, eval=FALSE}
install.packages("aoos")
```

To install from this repo:
```{r, eval=FALSE}
library(devtools)
install_github("wahani/aoos")
```

```{r, echo=FALSE}
wahaniMiscs::getLocalPackageUpdates("aoos")
```

## Material

- [Introduction Vignette](http://htmlpreview.github.io/?https://github.com/wahani/aoos/blob/master/inst/doc/Introduction.html): Is an overview of the things in this package.
- [retList](http://htmlpreview.github.io/?https://github.com/wahani/aoos/blob/master/inst/doc/retListClasses.html): Is what I would recommend to use from this package.
- [Performace Vignette](http://htmlpreview.github.io/?https://github.com/wahani/aoos/blob/master/inst/doc/performance.html): If this is an issue for you.
- [aoosClasses Vignette](http://htmlpreview.github.io/?https://github.com/wahani/aoos/blob/master/inst/doc/aoosClasses.html)
- [referenceClasses Vignette](http://htmlpreview.github.io/?https://github.com/wahani/aoos/blob/master/inst/doc/referenceClasses.html)

## Posts

- [Introducing v0.1.0](http://wahani.github.io/2015/01/Introducing-Another-Object-Orientation-System/)
- [Introducing v0.2.0](http://wahani.github.io/2015/05/Introducing-Another-Object-Orientation-System-2/)

## Examples:

### Simple class:

Names with a "." are not part of the constructed *list*.
```{r}
Employee <- function(.name, .salary) {
  'Common base class for all employees'
  
  print <- function(x, ...) {
    cat("Name  : ", .self$.name, "\nSalary: ", .self$.salary)
  }
  
  getName <- function() .name
  getSalary <- function() .self$.salary
  
  retList(c("Employee", "Print"))
  
}

peter <- Employee("Peter", 5)
peter
peter$getName()
peter$getSalary()
```

### Inheritance:

```{r}
Manager <- function(.name, .salary, .bonus) {
  'Extending the Employee class'
  
  bonus <- function(x) {
    if (!missing(x)) .self$.bonus <- x
    .self$.bonus
  }
  
  print <- function(x, ...) {
    cat("Name  : ", .self$.name, "\nSalary: ", .self$.salary, 
        "\nBonus:", .self$.bonus)
  }
  
  retList("Manager", super = Employee(.name, .salary))
  
}

julia <- Manager("Julia", 5, 5 * 1e6)
julia
julia$getSalary()
julia$bonus(10)
julia
```

### More features

This is something which is possible in Python and I was just curious if I can map it into `R`. It's okay:

```{r}
initPerson <- function() {
  
  .superEnv <- environment()
  .count <- 0
  
  getCount <- function() {
    cat("There are", .self$.count, "people out there.")
  }
  
  new <- function(name) {
    # happens on init
    .count <<- .count + 1
    
    print <- function(x, ...) cat("My name is", .self$name)
    countSiblings <- function() .count
    
    # Every instance knows about .count:
    retList(c("Person", "Print"), superEnv = new.env(parent = .superEnv))
  }
  
  retList("ConstructorPerson")
  
}

Person <- initPerson()
Person$getCount()
joe <- Person$new("Joe")
joe

sandra <- Person$new("Sandra")
Person$getCount()
sandra$countSiblings()
```